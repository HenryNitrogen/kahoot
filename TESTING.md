# 🧪 Kahoot Helper 系统测试指南

## 概述

我们为您提供了一个全面的系统测试页面，用于诊断和验证Kahoot Helper系统的各个组件是否正常工作。

## 🚀 快速开始

### 1. 启动后端服务器

```bash
cd server
chmod +x start.sh
./start.sh
```

或者手动启动：

```bash
cd server
npm install
npm start
```

### 2. 启动Web应用

```bash
cd web
npm install
npm run dev
```

### 3. 访问测试页面

访问 [http://localhost:3000/test](http://localhost:3000/test) 来进行系统测试。

## 🔍 测试内容

### 服务器健康检查
- 测试后端API服务是否正常运行
- 验证服务器响应状态
- 检查服务器版本信息

### 数据库连接测试
- 验证数据库连接是否正常
- 检查数据库表结构是否完整
- 显示数据库统计信息（用户数量、使用记录等）
- 测试数据库查询功能

### 用户注册测试
- 测试用户注册功能
- 验证JWT token生成
- 检查用户数据存储

### AI接口测试
- 验证AI问答功能
- 测试API调用和响应
- 检查使用限制功能

## 📊 测试结果说明

### 状态图标含义
- ✅ **成功** (绿色)：功能正常工作
- ❌ **错误** (红色)：功能存在问题，需要修复
- ⚠️ **警告** (黄色)：信息性消息或需要注意的事项
- 🔄 **加载中** (蓝色)：测试正在进行中

### 常见问题和解决方案

#### 1. 服务器健康检查失败
**可能原因：**
- 后端服务器未启动
- 端口被占用
- 防火墙阻止连接

**解决方案：**
- 检查后端服务器是否在运行 (`npm start` in server directory)
- 确认端口932是否可用
- 检查控制台输出中的错误信息

#### 2. 数据库连接失败
**可能原因：**
- 数据库服务器未运行
- 连接参数错误 (.env文件配置)
- 网络连接问题
- 权限问题

**解决方案：**
- 检查 `server/.env` 文件中的数据库配置：
  ```
  DB_HOST=hk.henryni.cn
  DB_PORT=3306
  DB_NAME=kahoot
  DB_USER=henrynitrogen
  DB_PASSWORD=Ni114514
  ```
- 验证数据库服务器是否在线
- 检查用户名密码是否正确
- 确认用户有足够的权限创建表

#### 3. AI接口测试失败
**可能原因：**
- AI API配置错误
- API密钥无效
- 网络连接问题
- 用户认证失败

**解决方案：**
- 检查 `server/.env` 中的AI配置：
  ```
  AI_API_URL=https://api.henryni.cn/v1/chat/completions
  AI_MODEL=gemini-2.0-flash
  DEFAULT_API_KEY=sk-FCg7LbxdDaXruAByQlIv6DBl8h5T2vFEvccgVJF4UecVRPB9
  ```
- 验证API密钥是否有效
- 检查网络连接

## 🛠️ 调试技巧

### 1. 查看控制台日志
- 浏览器开发者工具 (F12) → Console
- 服务器终端输出

### 2. 检查网络请求
- 浏览器开发者工具 → Network 标签
- 查看API请求和响应

### 3. 详细错误信息
测试结果中的每个项目都有"查看详情"选项，点击可以查看完整的错误信息和调试数据。

## 🎯 测试最佳实践

1. **按顺序测试**：先测试服务器健康状态，再测试数据库，最后测试业务功能
2. **记录错误**：复制错误信息用于问题排查
3. **多次测试**：间歇性问题可能需要多次测试才能发现
4. **环境检查**：确认开发环境配置正确

## 📞 获取帮助

如果测试过程中遇到问题：

1. 查看本文档的常见问题部分
2. 检查服务器控制台输出
3. 查看浏览器控制台错误信息
4. 提供完整的错误信息和系统配置

## 🔧 高级配置

### 修改服务器URL
在测试页面顶部可以修改服务器URL，适用于：
- 本地开发：`http://localhost:932`
- 远程服务器：`https://your-server-domain.com`
- 不同端口：`http://localhost:8080`

### 环境变量
关键的环境变量配置位于 `server/.env` 文件中，包括：
- 数据库连接信息
- AI API配置
- JWT密钥
- 服务器端口

## ✅ 系统要求

### 服务器端
- Node.js 16+
- MySQL 5.7+
- 网络连接到AI API服务

### 客户端
- 现代浏览器 (Chrome, Firefox, Safari, Edge)
- JavaScript启用
- 网络连接到后端服务器

---

通过使用这个测试系统，您可以快速诊断和解决Kahoot Helper系统中的任何问题，确保所有组件正常工作。
