<!DOCTYPE html>
<html>

<head>
    <title>Kahoot Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        
        .test-info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>

<body>
    <h1>Kahoot Extension Test Page</h1>

    <div class="test-info">
        <h2>Extension Status Test</h2>
        <p>This page simulates kahoot.it to test if the extension loads properly.</p>
        <div id="status" class="status info">Checking extension...</div>
    </div>

    <div class="test-info">
        <h2>Console Output</h2>
        <p>Open Developer Tools (F12) to see console logs from the extension.</p>
        <div id="console-output" style="background: #f8f9fa; padding: 15px; border-radius: 4px; font-family: monospace; white-space: pre-wrap;"></div>
    </div>

    <div class="test-info">
        <h2>Manual Test</h2>
        <button onclick="simulateKahootData()">Simulate Kahoot Quiz Data</button>
        <button onclick="checkExtensionElements()">Check Extension Elements</button>
    </div>

    <script>
        console.log('üß™ Kahoot Test Page loaded');

        // ÈáçÂÆöÂêëconsole.logÂà∞È°µÈù¢
        const originalLog = console.log;
        const outputDiv = document.getElementById('console-output');

        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.map(arg =>
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            outputDiv.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
        };

        // Ê£ÄÊü•Êâ©Â±ïÁä∂ÊÄÅ
        function checkExtensionStatus() {
            const statusDiv = document.getElementById('status');

            setTimeout(() => {
                const quizBox = document.getElementById('quizInfoBox');
                const menu = document.getElementById('quizMenu');

                if (quizBox && menu) {
                    statusDiv.className = 'status success';
                    statusDiv.textContent = '‚úÖ Extension loaded successfully! Both UI elements found.';
                } else if (quizBox || menu) {
                    statusDiv.className = 'status error';
                    statusDiv.textContent = '‚ö†Ô∏è Extension partially loaded. Found: ' +
                        (quizBox ? 'Quiz Box' : '') + (menu ? 'Menu' : '');
                } else {
                    statusDiv.className = 'status error';
                    statusDiv.textContent = '‚ùå Extension not loaded. No UI elements found.';
                }
            }, 3000);
        }

        // Ê£ÄÊü•Êâ©Â±ïÂÖÉÁ¥†
        function checkExtensionElements() {
            const quizBox = document.getElementById('quizInfoBox');
            const menu = document.getElementById('quizMenu');

            console.log('Extension Elements Check:');
            console.log('Quiz Box:', quizBox ? 'Found' : 'Not found');
            console.log('Menu:', menu ? 'Found' : 'Not found');

            if (quizBox) {
                console.log('Quiz Box styles:', {
                    display: quizBox.style.display,
                    position: quizBox.style.position,
                    zIndex: quizBox.style.zIndex,
                    visibility: quizBox.style.visibility
                });
            }
        }

        // Ê®°ÊãüKahootÊï∞ÊçÆ
        function simulateKahootData() {
            console.log('üéØ Simulating Kahoot quiz data...');

            // Ê®°ÊãüWebSocketÊ∂àÊÅØ
            const mockQuizData = {
                type: 'quiz',
                title: 'What is the capital of France?',
                choices: [{
                    answer: 'London'
                }, {
                    answer: 'Berlin'
                }, {
                    answer: 'Paris'
                }, {
                    answer: 'Madrid'
                }],
                questionIndex: 0,
                totalGameBlockCount: 10,
                timeAvailable: 30000,
                numberOfAnswersAllowed: 1,
                numberOfChoices: 4,
                pointsMultiplier: 1
            };

            console.log('Mock quiz data:', mockQuizData);
        }

        // ÂêØÂä®Ê£ÄÊü•
        checkExtensionStatus();

        // ÊØè5ÁßíÊ£ÄÊü•‰∏ÄÊ¨°
        setInterval(checkExtensionStatus, 5000);
    </script>
</body>

</html>